{{> header}}
<table class="fancytable">
	<thead>
		<tr>
			<td><abbr title="Parent schedule">Sch</abbr></td>
			<td><abbr title="Parent train">Trn</abbr></td>
			<td><abbr title="Live data?">Lv</abbr></td>
			<td>Time</td>
			<td>Action</td>
			<td>Service</td>
		</tr>
	</thead>
		{{#each body.mvts}}
		<tr {{#if this.canx}}class="movements-row-cancelled"{{/if}}>
			<td>
				{{#if this.parent_sched}}
					<a href="/schedule/{{this.parent_sched}}">→</a>
				{{/if}}
			</td>
			<td>
				{{#if this.parent_train}}
					<a href="/train/{{this.parent_train}}">→</a>
				{{/if}}
			</td>
			<td>
				{{#if this.live}}
					<abbr title="This movement actually happened at the time stated">✅</abbr>
				{{else}}
					{{#if this.canx}}
						<abbr title="This train was cancelled">❌</abbr>
					{{else}}
						{{#if this.prepped}}
							<abbr title="The train has been activated, but hasn't reached this station yet">🔴</abbr>
						{{/if}}
					{{/if}}
				{{/if}}
			</td>
			<td class="movements-cell-time">
				{{this.time}}
			</td>
			<td>
				{{this.action}}
			</td>
			<td>
				{{> orig_dest}}
			</td>
		</tr>
		{{/each}}
</table>
{{> footer}}
