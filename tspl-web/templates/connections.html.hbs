{{> header}}
<table class="govuk-table">
	<thead class="govuk-table__head">
		<tr class="govuk-table__row">
			<th class="govuk-table__header"><abbr title="Parent schedule">Sch</abbr></th>
			<th class="govuk-table__header"><abbr title="Parent train">Trn</abbr></th>
			<th class="govuk-table__header">Action</th>
			<th class="govuk-table__header"><abbr title="Live data?">Lv</abbr></th>
			<th class="govuk-table__header">Origin</th>
			<th class="govuk-table__header">Action</th>
			<th class="govuk-table__header"><abbr title="Live data?">Lv</abbr></th>
			<th class="govuk-table__header">Destination</th>
		</tr>
	</thead>
	<tbody class="govuk-table__body">
		{{#each body.conns}}
			<tr class="govuk-table__row" {{#if this.origin.canx}}class="movements-row-cancelled"{{/if}}>
					<td class="govuk-table__cell">
						{{#if this.origin.parent_sched}}
							<a href="/schedule/{{this.origin.parent_sched}}">→</a>
						{{/if}}
					</td>
					<td class="govuk-table__cell">
						{{#if this.origin.parent_train}}
							<a href="/train/{{this.origin.parent_train}}">→</a>
						{{/if}}
					</td>
					<td class="govuk-table__cell">
						{{this.origin.action}}
					</td>
					<td class="govuk-table__cell">
						{{#if this.origin.live}}
							<abbr title="This movement actually happened at the time stated">✅</abbr>
						{{else}}
							{{#if this.origin.canx}}
								<abbr title="This train was cancelled">❌</abbr>
							{{else}}
								{{#if this.origin.prepped}}
									<abbr title="The train has been activated, but hasn't reached this.origin station yet">🔴</abbr>
								{{/if}}
							{{/if}}
						{{/if}}
					</td>

					<td class="govuk-table__cell movements-cell-time">
						{{this.origin.time}}
					</td>
					<td class="govuk-table__cell">
						{{this.destination.action}}
					</td>
					<td class="govuk-table__cell">
						{{#if this.destination.live}}
							<abbr title="This movement actually happened at the time stated">✅</abbr>
						{{else}}
							{{#if this.destination.canx}}
								<abbr title="This train was cancelled">❌</abbr>
							{{else}}
								{{#if this.destination.prepped}}
									<abbr title="The train has been activated, but hasn't reached this.destination station yet">🔴</abbr>
								{{/if}}
							{{/if}}
						{{/if}}
					</td>

					<td class="govuk-table__cell" class="movements-cell-time">
						{{this.destination.time}}
					</td>
			</tr>
		{{/each}}
	</tbody>
</table>
{{> footer}}
